### NLP

NLP with Transformers

Hands-On Machine Learning with Scikit-Learn and TensorFlow, by Aurélien Géron (O’Reilly)

Deep Learning for Coders with fastai and PyTorch, by Jeremy Howard and Sylvain Gugger (O’Reilly)

Natural Language Processing with PyTorch, by Delip Rao and Brian McMahan (O’Reilly)

The Hugging Face Course, by the open source team at Hugging Face

- regular expressions

- text normalization

- string similarity

- language models

- vector semantics

- embeddings

Week 1 
7/29/2024

Mac Setup -

Order#: 54903/418210
Delivery on or before: 2024-07-26
Reference#: 31440645
Associate: Ling Huang

ling.huang@adp.com
Mac and network psw – Stat*!1
VPN - Microsoft authentication app
Webex - same psw
Associate ID – 526850
Vendor ID - V644076

Things to Do – First Day
ADP portal -

https://associateportal.adp.com/about_me/new_hire_onboarding/your_first_day

Find the vendor ID in your Personal Information page,

Cellphone purchase –
https://s1.ariba.com/gb/?realm=oneadp-global&locale=en_US

When you need to input Vendor ID, you can find them in the https://associateportal.adp.com/about_me/personal_information

 

Onboarding Materials -

Webex -

Free Lunch - https://app.food.ee/login

Onboarding Portal -

https://myonboarding.oneadp.com/cards

Privacy doc - 

https://associateportal.adp.com/privacy_at_adp

Tech doc -

GitHub Copilot -  https://docs.ai-dev-tools.us.caas.oneadp.com/github_copilot/introduction/

FTime Card -

Jira tickets and need to document time spent per project every week

Docker Mac - https://myadpaccounts.identitynow.com/ui/d/request-center/request-access

myLink2Learn -

https://adpassociate.litmos.com/course/1764543
myadp.adpcorp.com
 
Getting Started: Making Your Benefits Elections 

My Total Rewards - Enrich  
Understanding Your Medical and Prescription Drug Plan 
Dental, Vision, & Spending Accounts 
Being a Smart Health Care Shopper 
Preparing for the Unexpected: Disability, Life, & Accident Insurance 
Benefit Deadlines and Resources 
Retirement & Savings Programs
Benefits -
https://my.adp.com/static/redbox/#/benefits/landing

7/30/2024

https://confluence.es.ad.adp.com/display/LIFML/ML+Platform+Onboarding
Laptop setup
•	For WFH mode, you should have received an invitation for a remote session with your ADP laptop so Tech Cafe can configure everything.
•	make sure you get ADP Self Service admin rights (via temp 2-hour access)
o	You'll need to contact the Help Desk to have this added to the Self Service window
These accesses are a priority on your first day in order to be able to read many of the onboarding documents and review the code.
•	Have manager request Atlasssian access (Jira/Confluence)
•	Request access to bitbucket (git) using Lifion Service Desk (needs Jira access)
o	Summary - "Stash Access for #name"
o	Select "I am the Associate" or "I am the Manager". If former enter your Manager's name.
o	Requesting team/domain -  Platform Machine Learning
•	Request access to AWS (needs Jira access). See Lifion AWS Account Information for a list of accounts. (see comments below) SLA for account creation is 3 days.
•	Request a user account in appbuild lifion application  Application Reliability Helpdesk Select Lifion Ops. Choose Group: GPT-LIFION, Team: ML
•	Request Access to Prisma (Contact your manager ) Consoles and Prisma Support
•	Have approved SRE team member add you to the "Chelsea Tech Cafe" WebEx channel
o	Request access to IT Service Catalogue
	Request the "Temporary Admin Access" option be added to the laptop's Self Service application
•	Request a user account in appbuild lifion application  Application Reliability Helpdesk Select Lifion Ops. Choose Group: GPT-LIFION, Team: ML
•	Request Access to Prisma (Contact your manager ) Consoles and Prisma Support
•	Have approved SRE team member add you to the "Chelsea Tech Cafe" WebEx channel
o	Request access to IT Service Catalogue
	Request the "Temporary Admin Access" option be added to the laptop's Self Service application

First Week
  
Cellphone purchase –
https://s1.ariba.com/gb/?realm=oneadp-global&locale=en_US

•	Team Assistant
•	Team Connect
•	Team Converse – guided conversations
•	OneAI products

Generative AI Systems – ADP Generative AI Q&A systems
Experiments 
 FAQ – question/answer generations – BU = Lifion
ML team

Open AI 
AWS Bedrocks – deliverables/cloud services

  

 
 


 
 


 
 

 
7/31/2024

TEAM Connect – Search (ES/Solr)

Product Manager Training

Khara, Keval • Guided Learning - https://confluence.es.ad.adp.com/display/LDP/Guided+Learning+Home

More documentation - https://confluence.es.ad.adp.com/display/LDP/Intro+to+the+Platform

ML Onboarding and access to systems - 
https://confluence.es.ad.adp.com/display/LIFML/ML+Platform+Onboarding

smart actions - https://confluence.es.ad.adp.com/display/LDW/Smart+Actions+Guide

AI knowledge manager - https://confluence.es.ad.adp.com/display/LDW/AI+Knowledge+Management+for+Lifion+Chat

Time Sheet -
Weekly View: https://jira.service.tools-pi.com/secure/Tempo.jspa#/my-work/week?type=LIST
FY25 OOO Hours: https://jira.service.tools-pi.com/browse/NASNPTOUT-12

OOO - 
https://jira.service.tools-pi.com/secure/Tempo.jspa#/my-work/week?type=LIST

 
 
8/1/2024

W-4 and Direct Deposit – https://my.adp.com/static/redbox/?openDirectDeposit=true/#/pay/pay-statements

ADP Work - https://adponline.sharepoint.com/sites/adpworks-home
Standout - https://adponline.sharepoint.com/sites/StandOut/
Ethics – https://associateportal.adp.com/our_company/policies_guidelines/ethics_legal_compliance
Security – 
https://associateportal.adp.com/resources/helpful_adp_departments/global_security_organization/security_awareness_and_training

BLR – Business and Learning Resources
eBJM – Elastic Batch Job Manager
BJM – Batch Job Manager
QQ – on Queue
KCS – Knowledge Centered Service

Policy - 
PolicyTech New Hire Acknowledgements
US Federal, State and Local Postings and Brochures

Last login: Thu Aug  1 10:38:53 on ttys000

The default interactive shell is now zsh.
To update your account to use zsh, please run `chsh -s /bin/zsh`.
For more details, please visit https://support.apple.com/kb/HT208050.
LC4CV6DD4F:~ huanglin$ login
login: apldep	
Password:
Last login: Mon Jul 29 09:49:11 on console
apldep@LC4CV6DD4F ~ % sudo fdesetup
Password:
Sorry, try again.
Password:
Sorry, try again.
Password:
sudo: 3 incorrect password attempts
apldep@LC4CV6DD4F ~ % sudo fdesetup list
Password:
apldep,72BD2D20-B60C-4C7D-AEA3-338A2F19C2E5
aplsupport,CAA1A486-BEE9-47C2-8FBB-D8AFDCEBFE70
huanglin,1A81A14D-E461-44BB-B88E-E0D8240BF881
apldep@LC4CV6DD4F ~ % sudo jamf policy
Checking for policies triggered by "recurring check-in" for user "huanglin"...
No policies were found for the "recurring check-in" trigger.
Checking for patches...
No patch policies were found.
apldep@LC4CV6DD4F ~ % sudo jamf recon 
Retrieving inventory preferences from https://jppendpoint.oneadp.com:8443/...
Finding extension attributes...
Locating package receipts...
Locating hard drive information...
Locating applications...
Locating accounts...
Locating plugins...
Searching path: /Library/Internet Plug-Ins
Searching path: /System/Applications
Locating printers...
Gathering application usage information from the JamfDaemon...
Searching path: /Applications
Locating hardware information (macOS 14.5.0)...
Submitting data to https://jppendpoint.oneadp.com:8443/...
<computer_id>10498</computer_id>
apldep@LC4CV6DD4F ~ % 


Homebrew

Homebrew is a package manager for OS X. Run the following command in a terminal:

https://brew.sh/

Before you run the installation command, need to switch WIFI from ‘ADPESWLAN’ to ‘MYADPWIFI’.

Before you run the installation command, need to switch WIFI from “ONEADP”
to “ONEADPMOBILE”.
Docker Desktop
1.	Create SSH Key in Bitbucket
a.	Open terminal
b.	Check if you already have a SSH key created: ls -al ~/.ssh 
i.	If you see any files called id_rsa or id_rsa.pub jump to the step 3
c.	Generate a new key using: 
i.	ssh-keygen -t rsa -b 4096 -C "your.email@adp.com"
ii.	eval "$(ssh-agent -s)"
iii.	ssh-add ~/.ssh/id_rsa
d.	Now get the key value from: cat ~/.ssh/id_rsa.pub 
e.	In Bitbucket, click on your profile icon and then Manage acount
f.	Go to SSH Keys section and add a the value you just copied
g.	Save the changes and try to clone any Document Cloud repository to test it
2.	Appbuild
3.	 credentials: JakeHrp/adpADP27@
Appbuild credentials
https://appbuild.lifion.adp.com/view/home

Credentials: Jakehrp / adpADP08@
UKEmployeeTwo/ P@ssword145


https://appbuild.lifion.oneadp.com/api/developer-tools/v1/url/pPGaTYS_OA

Credentials: Jakehrp / adpADP08@

https://appbuild.lifion.adp.com/api/developer-tools/v1/url/16ExmDQeY6

Credential: jakehrp

https://appbuild.lifion.oneadp.com/api/developer-tools/v1/url/9id0_KxJW3
ScopedHRPSA/Lifion@30
https://appbuild.lifion.oneadp.com/api/developer-tools/v1/url/LJdEb4M-0f

https://confluence.es.ad.adp.com/display/LDW/Q1+%28FY25%29+Smart+Actions
 • IC: corehr.ic / ErelOne@1
• HRP: YC3.HRP / adpADP01@
• Scoped HRP: YC3.HRPS / adpADP01@
• Manager: YC3.MGR / adpADP01@
• Employee: YC3.EE / adpADP01@


https://confluence.es.ad.adp.com/pages/viewpage.action?pageId=2473598004

https://forms.office.com/pages/responsepage.aspx?id=gIQsTPDTW0i3UIB_9pOAL8oSBHdQk6dLsYydpPV7lv5UNTJNOTFLWTZPWjZNSTI3OEJEUldXTU9aUC4u

https://cicd.lifion.oneadp.com/docs/ci_onboarding/


8/2/2024

https://adponline.sharepoint.com/sites/Tech-Cafe/SitePages/newhires.aspx

ADP recommended Apps
https://adponline.sharepoint.com/sites/ADP-TechCafe-Community/SitePages/DocumentApp.aspx#/item/671

Your mission today is to install : Outlook, Webex and Standout on your mobile and try using them.

Join a community -  
Business Resource Groups (BRGs) at ADP
https://adponline.sharepoint.com/sites/DICSR/SitePages/brgs-at-adp.aspx

Career Growth
https://adponline.sharepoint.com/sites/Career-GrowthandDevelopment/

ADP Works
https://adponline.sharepoint.com/sites/adpworks-home

 
Week 2 
8/5/2024
AWS Training - https://urldefense.com/v3/__https://adpmeet.webex.com/adpmeet/ldr.php?RCID=35c20223feed45240dc35c0524e77e89__;!!L8-7AA!VpDzRNFlVVC5BEjb2oqJ-IWHnn5lb2T5hG24RiOVM3FbpPpYZIujMIJH6o9VvhO_L-Iw_3uY3R-x1Y89bg$

password - 38SeumMm

 

 

Guardrails for authorization / security

Candidate Topics -> Guided workflow
Candidate Answers -> Clarify the user/query intents

•	Having a baby -> Congratulation -> Mutuality Leave policy.
•	Define a mapper -> guided workflow -> query mapping
•	Time off request

Detect topics -> Guided workflow -> Match the policy topics/patterns -> Clarify the user intents
Multi-round questions and answers -> Additional fetched from question context.
Do we have a policy for further discussions.

Prompt Engineering
Meta data: Location, DateTime 

Personalized data might include the 401K policy data.
Data limitation: User persona data / financial data
Rewriting the query.

Just my two cents:
Q: The multi-round conversation query answer system might be aligned with LLM Agents scenario. Wondering if LLM Agents with service components (including Guardrail services etc.) could be more aligned with the use case?
Q:  Metrics such as grounded, relevancy are not sufficient. It’ll make sense to me to break down into different stages, Retrieval stage (hit rates, etc), End-to-end metrics (toxicity, etc).
Q: Clarify the methods, separate fine-tune/pre-train models from RAG, b/c address knowledge cutoff and hallucinations.


  
   


 
https://confluence.es.ad.adp.com/display/LDP/Introduction+to+Lifion


 


Mini-App is an individual unit of functionality that addresses a key feature in HCM space.

Mini-Apps built on the platform are easy to localize and customize, helping us to quickly adapt to changes and client-specific needs.


docker run --rm -v $PWD:/home/gradle/project -w /home/gradle/project docker.artifactory.us.caas.oneadp.com/gradle:8.6,0 ./gradlew build


✘ huanglin@LC4CV6DD4F  ~/Bitbucket/ml-search-fusion/reranking   Release/Lifion_24_40  docker run --rm -v $PWD:/home/gradle/project -w /home/gradle/project docker.artifactory.us.caas.oneadp.com/gradle:8.6.0  ./gradlew build
Unable to find image 'docker.artifactory.us.caas.oneadp.com/gradle:8.6.0' locally
8.6.0: Pulling from gradle
71dca2167f9f: Pull complete
799297b6f921: Pull complete
c8c6b1f7c640: Pull complete
09a7603aa03d: Pull complete
50fe6d0cba0c: Pull complete
354743dc12a3: Pull complete
80c6f699bed7: Pull complete
cd4a80596475: Pull complete
442ae3e73389: Pull complete
Digest: sha256:27ed98487dd9c155d555955084dfd33f32d9f7ac5a90a79b1323ab002a1a8b6e
Status: Downloaded newer image for docker.artifactory.us.caas.oneadp.com/gradle:8.6.0
Downloading https://artifactory.us.caas.oneadp.com/artifactory/gradle-distributions-generic-remote/gradle-8.2.1-bin.zip
............10%............20%............30%.............40%............50%............60%............70%.............80%............90%............100%

Welcome to Gradle 8.2.1!

Here are the highlights of this release:
 - Kotlin DSL: new reference documentation, assignment syntax by default
 - Kotlin DSL is now the default with Gradle init
 - Improved suggestions to resolve errors in console output
 - Reduced sync memory consumption

For more details see https://docs.gradle.org/8.2.1/release-notes.html

Starting a Gradle Daemon (subsequent builds will be faster)
> Task :compileJava
> Task :compileGroovy NO-SOURCE
> Task :processResources UP-TO-DATE
> Task :classes
> Task :jar
> Task :assemble
> Task :compileTestJava NO-SOURCE
> Task :compileTestGroovy
> Task :processTestResources NO-SOURCE
> Task :testClasses
> Task :test
> Task :jacocoTestReport
> Task :check
> Task :build

Deprecated Gradle features were used in this build, making it incompatible with Gradle 9.0.

You can use '--warning-mode all' to show the individual deprecation warnings and determine if they come from your own scripts or plugins.

For more on this, please refer to https://docs.gradle.org/8.2.1/userguide/command_line_interface.html#sec:command_line_warnings in the Gradle documentation.

BUILD SUCCESSFUL in 1m 7s
6 actionable tasks: 5 executed, 1 up-to-date


  196  git checkout -b testbranch
  197  cd reranking
  198  ./gradlew build
  199  ./graldew test
  201  ./gradlew deploy -Penv=dit
  202  ./gradlew test
 huanglin@LC4CV6DD4F  ~/Bitbucket/ml-search-fusion/reranking   testbranch 


8/6/2024

  196  git checkout -b testbranch
  197  cd reranking
  198  ./gradlew build
  199  ./graldew test
  201  ./gradlew deploy -Penv=dit
  202  ./gradlew test
 huanglin@LC4CV6DD4F  ~/Bitbucket/ml-search-fusion/reranking   testbranch 


   
Brian - Infrastructure Meeting 11:30am – 12:00pm

 

Virtual Interface / Search Blind Box, e.g, (User, Query)
Virtual Interface Gateway
ML Search Orchestrator
Redis (AWS service)
SOR (Persistent owned services - Mysql)
ES 
Solr 
Rerank components in ML connect using Java 
Authentication process based on users, timestamps, and etc


 
Brain - Infrastructure Meeting 12:45pm – 1:45 pm

 


Virtual Interface / Search Blind Box, e.g., (User, Query)
Virtual Interface Gateway
Redis (AWS cache service), e.g., Bob in include and exclude in groups, AWS AMI by infra team
SOR (Numerous persistent owned services - MySQL)
ES (Enterprise Search / Fusion)
ML Search Orchestrator, 
•	Query pipeline
•	Solr 
•	Reranking components in ML connect using Java 
Authentication process based on users, timestamps, and contexts.
Other owned services - ML Agent Runtime

https://lucidworks.com/fusion-platform/
 
ML-Search-Fusion Repo 

https://bitbucket.es.ad.adp.com/projects/LIFML/repos/ml-search-fusion/browse?at=refs%2Fheads%2FRelease%2FLifion_24_31

Collections – 

Actions

{
    "id": "Actions",
    "searchClusterId": "default",
    "solrParams": {
        "name": "Actions",
        "numShards": 1,
        "replicationFactor": 2
    }
}


Direct Reports

{
  "id": "DirectReports",
  "searchClusterId": "default",
  "solrParams": {
    "name": "DirectReports",
    "numShards": 1,
    "replicationFactor": 2
  }
}


Information Management

{
  "id": "InformationManagement",
  "searchClusterId": "default",
  "solrParams": {
    "name": "InformationManagement",
    "numShards": 1,
    "replicationFactor": 1
  }
}

Minimum Wage, 

{
    "id": "MinimumWage",
    "searchClusterId": "default",
    "solrParams": {
        "name": "MinimumWage",
        "numShards": 1,
        "replicationFactor": 2
    }
}

Paygroups

{
    "id": "Paygroups",
    "searchClusterId": "default",
    "solrParams": {
        "name": "Paygroups",
        "numShards": 1,
        "replicationFactor": 2
    }
}

People

{
    "id": "People",
    "searchClusterId": "default",
    "solrParams": {
        "name": "People",
        "numShards": 1,
        "replicationFactor": 2
    }
}

People Legacy

{
    "id": "PeopleLegacy",
    "searchClusterId": "default",
    "solrParams": {
        "name": "PeopleLegacy",
        "numShards": 1,
        "replicationFactor": 2
    }
}

Smart Actions

{
  "id": "SmartActions",
  "searchClusterId": "default",
  "solrParams": {
    "name": "SmartActions",
    "numShards": 1,
    "replicationFactor": 1
  }
}



Teams
{
    "id": "Teams",
    "searchClusterId": "default",
    "solrParams": {
        "name": "Teams",
        "numShards": 1,
        "replicationFactor": 2
    }
}


TimeOffTypes
{
    "id": "TimeOffTypes",
    "searchClusterId": "default",
    "solrParams": {
        "name": "TimeOffTypes",
        "numShards": 1,
        "replicationFactor": 2
    }
}




 
Index.ts
Type: Accept Pipeline or Profiles
Mode: Accept Index or Query

Process –

Actions, 
Direct Reports, 
Minimum Wage, 
Pay Groups, 
People, 
People Legacy, 
Teams, 
Timeofftypes

Embedding – 

MilvusId & Score

Reranker –

ActionReRanker
DirectReportReRanker
MinimumWageReRanker
PaygroupReRanker
PeopleLegacyReRanker
TeamReRanker
TimeOffTypeReRanker

Envs - AWS profile??
•	local
•	stage
•	integration
•	uat
•	appbuild
•	production

// Order needs to be followed
// 1. Collection
// 2. ReRanking
// 3. Pipelines
// 4. Profiles


Check pipeline exists.
ES_URL pipeline?
Brainstorm

Question Descriptions:

Nothing happened in productions, lots of alerts.
Containers did not send out requests.
Inbound traffics work okay.
Outbound traffics hit traffic boundary – requests stalk in Containers POD?
Hard to figure out the containers which stalk the service.
Productions failed 
Big changes triggers/overwhelmed
Batches size & 100/1000 group updates triggered requests

Solutions:

Tonight: HELM chart update to ensure pre-warming happens for demo clients.

Short term: Routing to different containers (3 - 1 for Capstone; 1 for Demo clients; 1 for all others) + give more memory to the container + ensure we dont make a call if the inclusion/ exclusion list grows over a point (this needs further discussion as a user may experience slowness even if their cache exists)
	•	next upcoming release (Lifion 24.34). Production Go/No-Go on 8/15/24 4:30 PM). Will leave possible slowness in capstone if multiple users log in and we must do auth updates

Option 1 – PODS: Routing to different containers
Create new
600 associates hire -> trigger new auth groups
100 thousand -> requests 
Proposed solutions
updates -> Solr
Each batch ->
Waiting for auth
Empty search 
Status implements
Special containers / Regular containers
Routing / Authorization pipelines were separated.


Medium term: Enable dogpiling across containers + separate services for search and auth updates = allows us to run multiple containers and serve more requests.
	•	the release after next (Lifion 24.37). Will target separate services to be GA in this release and dogpiling pilot with selected clients. Production Go/No-Go	 on 9/5/24 4:30 PM. Should all all read requests to go through irrespective of any indexing.
	•	Dogpiling across containers GA in 24.40. Production Go/No-Go on 9/18/24 4:30 PM. Will allow us to scale up with more containers further reducing potential latencies.
Option 2 – Separate search and index 
Medium/Long terms – More memoies for containers
Radis Status Updates
Requests from 
- Huge delayed
- Requests and Responses

Option 3 – Update Group include and exclude discussions
More clients?
Memory? 
CPUs?
Appbuild – performance tests need index?
Sandbox click tests

Important things note:
Q. Post medium term fix, who can possibly experience slowness after all these changes?
A. People who log in and have no auth cache built. Even for this we can possibly explore turning pre-warming back on for these clients as indexing containers will be separate. Will help us to race ahead and build the cache

Q. Are there any risks?
A. Yes the risk is we still do not fully understand why there are 10 min delays in production from when we record we send the request and when ES receives it. This solution is based on the understanding that the hold-up is on our end. To mitigate this risk we will have one person to keep digging into the promises issue to first check if this is true and to then understand the issue and try to find a fix for it. 

Pre-warming 
Prepare search 
Service issues
Solr slow down and then 
When index happening, the fusion 
Separate requests read and write 
Enterprise search will have 
Send request 10:30, 10 mins later to get responses.
Memory and CPU look normal,  
Dodge containers 
Slow rollout 
Implementation

8/7/2024
 
Developer  tools
Virtual Interface / Search Blind Box, e.g., (User, Query)
Virtual Interface Gateway
Redis (AWS cache service), e.g., Bob in include and exclude in groups, AWS AMI by infra team
SOR (Numerous persistent owned services - MySQL)
ES (Enterprise Search / Fusion)
ML Search Orchestrator, 
•	Query pipeline
•	Solr 
•	Reranking components in ML connect using Java 
Authentication process based on users, timestamps, and contexts.
Other owned services - ML Agent Runtime

Getting familiar with codebase -
Access the python codebase for query intents.
Data quality checks.
Create AWS Neptune instance of KG.
Cypher query to the KG.
Finetune QA data 
How to create topics, ontology created by the existed logs?
Topic extractions from policies 

What are the key AWS components?

https://confluence.es.ad.adp.com/display/DMTeam/2.+ML+System+Components+Overview

API Gateway	AWS	User/Application Interface to Model
Lambda	AWS	Model Process
Opensearch (Serverless)	AWS	Vector Database
DynamoDB	AWS	Online Feature Store (store data for models)
Sagemaker	AWS	Online Model Endpoint
Step Function	AWS	Pipeline for deploying/creating sagemaker model endpoint
Notebook(Workflow)	Databricks	Pipeline for model training, inference, feature engingeering, vector database indexing, etc
Model Registry (Unity Catelog)	Databricks	MLFlow Registry, store model artifact and model version control
Delta Lake (One Data)	AWS/Databricks	Centralize Data Lake

https://confluence.es.ad.adp.com/display/LIFML/Recordings

ML Search Orchestrator -
https://miro.com/app/board/uXjVMUNbREE=/

Query Parser -> Authorization -> ES Search -> Response

 

https://confluence.es.ad.adp.com/display/LDW/Team+Connect+Architectural+Documents
 

https://bitbucket.es.ad.adp.com/projects/LIFML/repos/ml-smart-actions/browse/docs/smart_action_arch.png?at=refs%2Fheads%2FRelease%2FLifion_24_34

8/8/2024
Gabe shared documents – 
Research Project POC - https://confluence.es.ad.adp.com/display/LIFML/Research+Projects

 

Recommender Approaches - https://confluence.es.ad.adp.com/display/LIFML/Recommender+Approaches

 

Architecture -
https://confluence.es.ad.adp.com/display/LIFML/Architecture

 

Todo - Follow the instructions to understand platform concepts

https://confluence.es.ad.adp.com/display/M2/GitHub+Copilot

Administration Tools
https://confluence.es.ad.adp.com/display/M2/Administration+tools

Splunk

https://confluence.es.ad.adp.com/display/LIFML/Research+Projects
https://confluence.es.ad.adp.com/display/LIFML/Recommender+Approaches
https://confluence.es.ad.adp.com/display/LIFML/Architecture

Follow-up:

Lifion HCM Space requests

Splunk requests

stash.es.ad.adp.com

Brian – Smart Action Meeting 11:15am – 12:00pm
https://bitbucket.es.ad.adp.com/projects/LIFML/repos/ml-smart-actions/browse/docs/smart_action_arch.png?at=refs%2Fheads%2FRelease%2FLifion_24_34


     
 

 


docker-compose up -d
docker ps
cat package.json

    "start-dev": "node node_modules/nodemon/bin/nodemon.js src/app.ts --config nodemon.json",
    "build": "npm run lint && npm run compile",
    "build-test": "npm run compile",
    "jshint": "npm run format-check && npm run eslint-jenkins",
    "lint": "npm run format-check && npm run eslint-local",
    "lint-fix": "npm run format-write && npm run eslint-local",
    "eslint-local": "eslint \"src/**/*.ts\" \"spec/**/*.ts\"",
    "eslint-jenkins": "rm -rf _lint && mkdir _lint && eslint --format checkstyle -o _lint/report.xml \"src/**/*.ts\" \"spec/**/*.ts\"",
    "compile": "rm -rf dist && tsc",
    "test": "npm run compile && npm run test-unit-report",
    "test-unit": "mocha --r ts-node/register -- \"spec/unit/**/*.spec.ts\" --config .mocharc.local.json --exit",
    "test-unit-report": "nyc mocha --r ts-node/register -- \"spec/unit/**/*.spec.ts\" --config .mocharc.jenkins.json --reporter-option junit_report_path=spec/reports/unit-test-report.xml --exit",
    "test-unit-coverage": "npm run compile && nyc --check-coverage --reporter text --reporter html --reporter text-summary npm run test-unit-report",
    "test-integration": "mocha \"spec/integration/**/*.ts\" --config .mocharc.local.json",
    "test-integration-report": "mocha \"spec/integration/**/*.ts\" --config .mocharc.jenkins.json --reporter-option junit_report_path=spec/reports/integration-test-report.xml",
    "format-base": "prettier --config .prettierrc",
    "format-check": "npm run format-base -- -c \"src/**/*.ts\" -c \"spec/**/*.ts\"",
    "format-write": "npm run format-base -- --write \"src/**/*.ts\" --write \"spec/**/*.ts\"",
    "prepare": "husky install",
    "preversion": "git fetch --tags --force",
    "version": "auto-changelog -p && git add CHANGELOG.md",
    "postversion": "git push && git push --tags"

npm run test-unit
npm  run test
npm run compile


https://confluence.es.ad.adp.com/display/LIFML/ML+Infrastructure

Smart-Actions Terminology:
Intent: the intent behind the user's phrase.
In "take `time off type` for `date range`, the intent is that the user is trying to take paid time off (PTO).
Entity: a resolvable component of the user's phrase.
In "take `time off type` for `date range`, the entities are `time off type` and `date range`. These will be resolved and sent to the underlying fulfillment
Fulfillment: the backing component.
e.g. tile
Template Utterance: the template that will be filled out (for entities) and rendered to users
e.g. "take `time off type` for `date range`"
Requirements:
Show relevant "smart-actions" based on the language of the user
Be able to match intents based on the user's language
Be able to resolve entities in the user's query based on the user's language.
For example, if a user types in "take `vacation` `until friday`, we would need to be able to resolve `vacation` to the proper time off type and `until friday` to the right date range (in the respective language).
Be able to let LD's specify translations in a designer (future work for non-entities in the template utterance).

8/9/2024
Multi-Agent Architecture -
https://miro.com/app/board/uXjVNDEs9_U=/

https://confluence.es.ad.adp.com/display/LIFML/ML+Infrastructure

huanglin@LC4CV6DD4F  ~/Bitbucket/cert-authority   master  sudo ./scripts/install_client.sh
Password:
Getting the cert authority binary from artifactory
rm: ssh-cert-authority.tar.gz: No such file or directory
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
100 7908k  100 7908k    0     0  5590k      0  0:00:01  0:00:01 --:--:-- 5588k
Assuming that you're using this key: /Users/huanglin/.ssh/id_rsa.pub
Creating /Users/huanglin/.ssh_ca/requester_config.json
Creating /Users/huanglin/.ssh_ca/signer_config.json
Installing request_cert
Installing get_cert
Installing sign_cert
Your fingerprint is: 10:3e:ef:13:7a:ad:5d:76:ef:7a:fc:17:a5:82:e4:d8

Sourabh Meeting –

https://adpmeet.webex.com/webappng/sites/adpmeet/recording/89f928d138a0103dbee742e65272dfb8/playback

Dev tools -

Jenkins - https://confluence.es.ad.adp.com/display/LDW/Common+How-twos

Solr 
•	Very fast, highly scalable search server with build-in sharding and replication – based on Lucence
•	Dynamic schema, powerful query language, faceted search, accessible via simple REST-like web API w/XML, JSON, Ruby, and other data formats.
•	Sharding
o	Query any server – it executes the same query against all other servers in the group
o	Returns aggregated result to origin caller
•	Async replication (slaves poll their masters)
o	Can use repeaters if replicating across data centers

 

Lucid-works fusion platform training video –
 
Lucid-works
https://adpmeet.webex.com/recordingservice/sites/adpmeet/recording/17bcfd8da4d1103b9ff56eda43ba9675/playback

 

https://confluence.es.ad.adp.com/pages/viewpage.action?pageId=2078989128

Week 3
8/12/2024
ML-Search-Fusion Repo 

https://bitbucket.es.ad.adp.com/projects/LIFML/repos/ml-search-fusion/browse?at=refs%2Fheads%2FRelease%2FLifion_24_31

Install SDKMAN - https://sdkman.io/install

curl -s "https://get.sdkman.io" | bash

export SDKMAN_DIR="$HOME/.sdkman"
[[ -s "$HOME/.sdkman/bin/sdkman-init.sh" ]] && source "$HOME/.sdkman/bin/sdkman-init.sh"

ls -axl ~/.sdkman

 

Install groovy
/Users/huanglin/.sdkman/candidates/groovy/current/bin/groovy
sdk i groovy
sdk ls groovy
groovy –version
sdk u groovy 4.0.22 

groovyconsole


 

 

8/13/2024
 

  
 

from Bradshaw, Monique to Everyone:    9:05  AM
https://adponline.sharepoint.com/sites/GPTworks-Global-Product-and-Technology/
from Bradshaw, Monique to Everyone:    9:08  AM
https://adponline.sharepoint.com/sites/GPTCapability-Model
  
 
 

https://bitbucket.es.ad.adp.com/projects/LIFML/repos/ml-search-fusion/pull-requests/75/diff#pipelines%2Fquery%2Factions_cb18344e-3861-40cb-8cc0-33f71aaca6f2_query.json

https://bitbucket.es.ad.adp.com/projects/LIFML

Lucidworks Fusion 

https://search.fusion.lifion.app.dit.us.caas.oneadp.com/auth/login?return=/admin/
lifionmachinelearning
Welcome123

 
 
Collections managers (how many documents/size)
 

People 160K documents, 1.54 GB
Actions 44K documents, 68 MB
…
 
Pipelines manage index and query
•	Pipelines | Indexing | … related to ingest data and create index
 
 

•	Querying | Pipelines | … Querying related to trigger query and generate results
 
 
Profiles manage endpoints
•	Indexing | Profiles | … Indexing profiles -> endpoints
o	id
o	indexPipeline
o	collection
o	parser
o	additionalProperties
 
 
•	Querying | Profiles | … querying profiles -> endpoints
o	id
o	queryPipeline
o	collection
o	searchHandler
o	searchMode
o	additionalProperties

 

 
Solr Queries
https://search.solr.lifion.app.dit.us.caas.oneadp.com/
 

 
 
Brian – Meeting 11:15am – 12:00pm
 
8/14/2024

https://appbuild.lifion.adp.com/view/home

Credentials: Jakehrp / adpADP08@

https://appbuild.lifion.oneadp.com/api/developer-tools/v1/url/pPGaTYS_OA

Credentials: Jakehrp / adpADP08@

https://appbuild.lifion.adp.com/api/developer-tools/v1/url/16ExmDQeY6

Credential: jakehrp

curl --location --request GET 'https://search.fusion.lifion.app.fit.us.caas.oneadp.com/api/apps/Lifion/query-pipelines/people_4f76ca21-8350-41e8-8bc8-5f677362d9cf_query' \
--header 'x-api-key: e39e2ab6-234f-471b-b900-8f91ba89c7aa'

Appbuild -> FIT -> x-api-key.fit=e39e2ab6-234f-471b-b900-8f91ba89c7aa
Integration -> DIT -> x-api-key.dit=d834c27a-464d-4220-8ef8-02918da33159

curl --location --request GET 'https://search.fusion.lifion.app.dit.us.caas.oneadp.com/api/apps/Lifion/query-pipelines/peoplelegacy_cd7c91cf-3436-42b9-95a1-82edd16dd57b_query' \
--header 'x-api-key: d834c27a-464d-4220-8ef8-02918da33159'







 
 
8/15/2024

Relevancy

Solr’s relevancy scores are based upon the Similarity class, which is a Java class that defines how a relevancy score is calculated based upon the results of a query. By default, Solr uses Lucene’s (appropriately named) DefaultSimilarity class, which uses a two-pass model to calculate similarity. First, it makes use of a Boolean model to filter out any documents that do not match the customer’s query. Then it uses a vector space model for scoring and drawing the query as a vector, as well as an additional vector for each document. The similarity score for each document is based upon the cosine between the query vector and that document’s vector.

 
Query-time boosting, the most flexible and easiest to understand form of boosting, uses the following syntax:
 
Ppl actually include 5 fields:
•	legalName
•	eId
•	workerStatus
•	workerStatusSubType
•	statusStartDate

8/15/2024

 

 


 

 

Update on the move for the folks in Chelsea

Aug 8 - Move video displays and Webex devices (essential rooms will remain equipped)

So starting Aug 8th, I would still book your rooms but you may need to use your laptops more to share and work. Just be flexible as things may start to look sparse this week.

  	  
Aug 29 - Last day at 135 W 18th St location

If you are not going to be here on the 29th of Aug, start to move your personal items only before then.

The new office will be BYOB for keyboards and mice/track pads. It will have dual monitors at each desk, one of the monitors is your dock, at each desk.

Do not take your monitors, roller cabinets, etc. Take only your personal items. For those that are going to be here the last coming days, I think we will have boxes to help. Again, do not take ADP equipment home, just your laptop and personal items.


Aug 30 to Sep 6 - Associates work from home

Here is the chance to work where you feel most comfortable outside of this office as we go through this transition. Leverage this time, which also includes Labor Day, as you see fit. Just keep your work hours appropriate to your projects and teams needs. So no 3/2 but a full remote during this time.	  

Sep 9 - First day of business at 115 W 18th St location

Welcome back to the first week at the new office.
Week 4
8/19/2024
Postman

https://confluence.es.ad.adp.com/display/ALD/Using+Postman

postman://auth/callback?code=c6be6832ef7b84fa9b14e50063eabead1b08e2dcba5bfb478c7acce5110583ab

8/20/2024
Bitbucket commit commands

git rebase Release/Lifion_24_40
git pull
git add -p
git commit -m "change versions"
git push -f


git checkout Release/Lifion_24_40
git pull
git checkout -
git rebase Release/Lifion_24_40

git reset --soft HEAD~8
git commit
git push -f

[ML-3442] update pipelines and reranking for people legacy

After just generating one commit, and need to change the code
git add -p
git commit --amend


https://search.fusion.lifion.app.fit.us.caas.oneadp.com/admin/apps/Lifion/Actions?apps=!((component:(data:(componentId:query-profiles,id:!n,profileType:query),excludeFromHistory:!f,type:profiles),license:(enabled:!t),properties:(displayTitle:%27Query%20Profiles%27),puid:%27331694453881.5293%27),(component:(data:(componentId:query-pipelines,pipelineId:people_4f76ca21-8350-41e8-8bc8-5f677362d9cf_query,pipelineType:query),excludeFromHistory:!f,type:pipelines-index),license:(enabled:!t),properties:(displayTitle:%27Query%20Pipelines%27),puid:%27544921853777.53754%27))

https://search.fusion.lifion.app.dit.us.caas.oneadp.com/admin/apps/Lifion/Actions?apps=!((component:(data:(componentId:query-pipelines,pipelineId:peoplelegacy_cd7c91cf-3436-42b9-95a1-82edd16dd57b_query,pipelineType:query),excludeFromHistory:!f,type:pipelines-index),license:(enabled:!t),properties:(displayTitle:%27Query%20Pipelines%27),puid:%271333645301875.3657%27))

https://jira.service.tools-pi.com/plugins/servlet/desk/portal/27?requestGroup=958

https://myadpaccounts.identitynow.com/ui/d/request-center/my-requests

https://bitbucket.es.ad.adp.com/projects/LIFIONML/repos/sagemakerstudio/browse/Brian/OpensearchUtils.ipynb?at=refs%2Fheads%2Fcurrent-set

 
Brian – Meeting 4:30pm – 5:30pm
 
People

 

Actions

https://appbuild.lifion.adp.com/view/home

 

Simulation Annealing
https://www.kaggle.com/competitions/uspto-explainable-ai/discussion/522233

query = (subquery1 OR subquery2 OR …) NOT (negative-subquery1 OR negative-subquery2 OR …)

https://learning.oreilly.com/library/view/practical-natural-language/9781492054047/ch02.html#building_your_model

Metrics used for intrinsic evaluation across various NLP tasks. For a more detailed discussion of the metrics, refer to the corresponding reference.
 
8/21/2024
Popular Metrics and NLP Applications - Classifications

 
 
Ranking tasks like information search and retrieval mostly uses ranking-based metrics, such as MRR and MAP, but usual classification metrics can be used, too. In the case of retrieval, we care mainly about recall, so recall at various ranks is calculated. For example, for information retrieval, a common metric is “Recall at rank K”; it looks for the presence of ground truth in top K retrieved results. If present, it’s a success.
Reference - https://adponline-my.sharepoint.com/:p:/g/personal/lij2_es_ad_adp_com/ER-bGsDQSn9EnmIHxfKfz3QBkR9RpmJPbVHFf479Ur4ofQ?email=ling.huang%40ADP.com&e=PvRnAt

8/22/2024

Thick Deeper, Look Further, Work Harder

 

Step 1 - people.PeopleStage 

INFO com.adp.lifion.process.people.PeopleStage - [x-trace-id: null] intentFlag= 
INFO com.adp.lifion.process.people.PeopleStage - [x-trace-id: null] No of fields for fieldLevel Access= 3

Step 2 – rerank.PeopleReRanker
INFO com.adp.lifion.rerank.PeopleReRanker - [x-trace-id: null] Inside function reRankDocs ...
INFO com.adp.lifion.rerank.PeopleReRanker - [x-trace-id: null] No of searchable fields= 5
INFO com.adp.lifion.rerank.PeopleReRanker - [x-trace-id: null] Field Indexes added for legalName
INFO com.adp.lifion.rerank.PeopleReRanker - [x-trace-id: null] Field Indexes added for displayName
INFO com.adp.lifion.rerank.PeopleReRanker - [x-trace-id: null] Field Indexes added for positionTitle
INFO com.adp.lifion.rerank.PeopleReRanker - [x-trace-id: null] Field Indexes added for locationName
INFO com.adp.lifion.rerank.PeopleReRanker - [x-trace-id: null] Field Indexes added for eID
INFO com.adp.lifion.rerank.PeopleReRanker - [x-trace-id: null] Current date: 2024-08-28 00:00:00


calculateTimeDeltaInDays
processStatusDate
getStringFieldValue
setAccessifNewRecord
setMultipleFieldValuesIfAuthorized
setFieldValueIfInclusion
setFieldValueIfAuthorized
setAccessifNewRecord
setMultipleFieldValueIfInclusion
setSelfSearchFields
processFieldAuthoirzation
getIntentFlagMap
setScoreFactor
calculateReRankScore
combineSolrReRankingScores ->  finalScore = newScore + solrScore
reRankDocs

 

  

Step 3 – common.processQueryField
INFO com.adp.lifion.common.processQueryField - [x-trace-id: null] Alternate Words considered


Step 4 package com.adp.lifion.rerank.PeopleReRanker
INFO com.adp.lifion.rerank.PeopleReRanker - [x-trace-id: null] Searchable field Scores : {1={displayName=46.0}, 2={displayName=11.0}, 3={displayName=46.0}, 4={displayName=3.0}, 5={displayName=3.0}}
INFO com.adp.lifion.rerank.PeopleReRanker - [x-trace-id: null] Searchable field Score Size: 5 
INFO com.adp.lifion.rerank.PeopleReRanker - [x-trace-id: null] reRankScore : {1=36.800000000000004, 2=8.8, 3=36.800000000000004, 4=2.4000000000000004, 5=2.4000000000000004}
INFO com.adp.lifion.rerank.PeopleReRanker - [x-trace-id: null] Final Solr and ReRank Combined Score : {1=46.800000000000004, 2=12.8, 3=48.800000000000004, 4=7.4, 5=5.4}

 

Step 5 package com.adp.lifion.common.RemoveDocs
INFO com.adp.lifion.common.RemoveDocs - [x-trace-id: null] No of Documents removed : 0
INFO com.adp.lifion.common.RemoveDocs - [x-trace-id: null] Removed Documents Idx : []
INFO com.adp.lifion.common.RemoveDocs - [x-trace-id: null] Final Documents Size : 5

Step 6 package com.adp.lifion.process.people.PeopleStage
INFO com.adp.lifion.process.people.PeopleStage - [x-trace-id: null] Docs reranked with authorization
INFO com.adp.lifion.process.people.PeopleStage - [x-trace-id: null] Time to rerank docs (in ms) = 21
INFO com.adp.lifion.process.people.PeopleStage - [x-trace-id: null] reRanked docs size = 5
INFO com.adp.lifion.process.people.PeopleStage - [x-trace-id: null] Exiting process for people reranking
INFO com.adp.lifion.process.people.PeopleStage - [x-trace-id: null] Entered process for People Reranking
INFO com.adp.lifion.process.people.PeopleStage - [x-trace-id: null] Size of Docs received from Solr : 5
INFO com.adp.lifion.process.people.PeopleStage - [x-trace-id: null] originalQuery= a
INFO com.adp.lifion.process.people.PeopleStage - [x-trace-id: null] searchType= process the field level authorization acc to inc and exc

Method Call to Boost Docs if intent matches
Method Call to Boost Docs as per the date difference.
Method Call: To process the query field scores
For each key in searchableFieldsIdxScores, get the value
calculateReRankScore
            Map<String, Double> reRankScore = new HashMap<>();
//          Method: Calculate reranking score for each document based on reranking logic
            reRankScore = calculateReRankScore(…);
            logger.info("[x-trace-id: {}] reRankScore : {}", traceId, reRankScore);

//           Combine Scores from Solr and ReRanking.
            Map<String, Double> finalScoreMap;
            finalScoreMap = combineSolrReRankingScores(docs, reRankScore);
            logger.info("[x-trace-id: {}] Final Solr and ReRank Combined Score : {}", traceId, finalScoreMap);

Splunk 

https://confluence.es.ad.adp.com/pages/viewpage.action?pageId=2435098683

https://adpdev.splunkcloud.com/en-US/app/lifion/search?sid=1724431097.15359331

Redis functionality

Int and appbuild: https://bitbucket.es.ad.adp.com/projects/LIFHELM/repos/charts/pull-requests/12381/overview
Appstaging: https://bitbucket.es.ad.adp.com/projects/LIFHELM/repos/charts/pull-requests/12382/overview
Prep: https://bitbucket.es.ad.adp.com/projects/LIFHELM/repos/charts/pull-requests/12383/overview
Prod: https://bitbucket.es.ad.adp.com/projects/LIFHELM/repos/charts/pull-requests/12385/overview

Some details:

Int: enabled for all clients
Appbuild: enabled for Lifion payroll, 002 and core remodel in one farm
Appstaging and prep: enabled for new clients introduced in 24.37 that were already in their own farm
Prod: enabled for PCS testing clients but they'll be in a new farm that needs to be created
Week 5
8/26/2024
Debug peopleReRankTest.process(queryRequestResponse, context)
2019-08-30T00:00:00Z,4ec7952b-eeac-484a-b925-bb52562c4556,berndard leno,nan,active,nan,1.6
2021-07-16T23:59:59Z,3b3e86f6-4d77-4405-a8ea-290270d28a7e,bernard leno,nan,inactive,Terminated,1.6
2019-03-01T00:00:00Z,f298368c-ecb2-438f-9ea0-d725474efb0d,brian may,nan,active,nan,1.6
2022-01-05T00:00:00Z,b78bc886-066b-4a89-afd3-2115ab4b42ea,mary busey oct 17,sudha_test_test_p920,active,nan,1.6
nan,2620cf58-f76f-44b6-8023-5c50c5063965,nan,by adp in chelsea",application developer,Active,1.6
nan,d2750675-543b-40bd-bee0-4119577a82e6,ttt,by adp in chelsea",application developer,Active,1.6
nan,130546e2-248d-49f5-b4e6-c99993b99ec8,nan,by adp in chelsea",application developer,Active,1.6
nan,9f9a4ca8-3ce4-4c1f-8385-c8691051ba54,nan,by adp in chelsea",application developer,Active,1.6
nan,fd0e5607-fc01-4212-bc42-b50662833eb6,nan,by adp in chelsea",application developer,Active,1.6
nan,10609f6b-1887-41eb-bf96-77785af32aa7,nan,by adp in chelsea",application developer,Active,1.6
nan,8f9465c8-c5c5-4503-96c9-86ee3924d51e,nan,by adp in chelsea",application developer,Active,1.6
nan,a9be02c2-496f-42ea-8b16-e277443037f7,nan,by adp in chelsea",application developer,Active,1.6
nan,1a9a4062-9648-40ac-bd77-514324da7554,nan,by adp in chelsea",application developer,Active,1.6
nan,b3e8eaa6-90ee-4f54-b92f-4800a325183b,nan,by adp in chelsea",application developer,Active,1.6
nan,0aceb5ea-d7bb-4872-994a-dd9e9deb1934,nan,by adp in chelsea",application developer,Active,1.6
nan,1d21642b-bcba-4b99-83d4-d9278cb60990,nan,by adp in chelsea",application developer,Active,1.6
nan,96894000-a6fb-4e89-8280-ac457d1165c6,nan,by adp in chelsea",application developer,Active,1.6
nan,74111fa0-dd50-40c8-9db1-b59bef903a5c,nan,by adp in chelsea",application developer,Active,1.6
nan,63b00608-6206-4ba6-88a4-f2afba92721d,onboardfirstname4,by adp in chelsea",application developer,Active,1.6
nan,026f25d0-eb92-48e4-8ef8-ed897acc6c1a,onboardfirstname1 lastname1,by adp in chelsea",application developer,Active,1.6
2024-01-08T00:00:00Z,fd37877d-6d80-4940-acfa-d8f303c629ea,lakshmi prasanna bangaru,lifion new hires,active,nan,1.6
2020-09-01T00:00:00Z,ead19cba-bbb7-4c09-909b-86b1132b7a80,madhavi bonthu,nan,active,nan,1.6
nan,630cd399-65a6-41a5-8d1e-14b860f771bc,maanik baasha,nan,nan,nan,1.6
2019-01-01T00:00:00Z,9658bea3-5fe3-4bd4-a893-476c7b95b54a,baby boomers,nan,active,nan,1.6
2019-01-01T00:00:00Z,0745f0ad-9d76-4c2e-b02d-5f0989c6c6e5,baby,nan,active,nan,1.6

8/27/2024
AWS Training

The current date is ${new Date().toDateString()}.
      You are an AI assistant tasked with interpreting user query and perform the following tasks:
        1. Find the most relevant item from a provided list of items based on the user's query. The list is an array of JSON objects, where each object contains a "description" property. Your task is to semantically match the user query against this "description" and perform the following operations, please consider the entire description to make the decision:
            a. Add an "isAmbiguous" property to each JSON object in the list. This property should be set to "true" if the "description" is not specifically about the user's query.
            b. Add a "score" property to each item in the list, indicating the relevance of the item to the user's query. The score should be a number between 0 and 1, where 1 indicates a perfect match and 0 indicates no match.
            c. Return only the modified list of items as a valid array of JSON objects, without any additional text or comments in the response. The response should be a valid JSON array of objects.

      List of items: ${JSON.stringify(items)}
      User's query: ${query}


initial_prompt = """ I have this patient"""

system_prompt = """you are a highly experience medical professional with a specialty..."""

...

- Inference Configurantions

Temperature
Top p
Top k
Maximum number of tokens
Stop sequences

- Prompts: Information you pass into a LLM

Task context
Data
Conversation / action history
Instructions
Examples

- Model-sepcific prompts

Prompt formats 
Claude prompt
Open Assistant prompt


Start with Role and Goal
Provide context and background
Clearly define the task
Finish with content

- Prompt Anatomy

1. Task context
2. Tone context
3. Background data, documents, and images
4. Detailed task description & rules
5. Examples
6.Converation history
7. Immediate task description or request
8. Thinking step by step / take a deep breath
9. Output formatting
10. Prefilled response

- System Prompt

Maintain personality in Role-Playing Scenario - Role playing
Exhibiting more creative and natural AI Behavior
Increase Resilience Against Attempts to break character - Guardrail


- Prompt engineering

Iterative process
Prompt quality and structure can significantly influence performance
Counteract hallucinations
Dyanmic field, rapidly evolving



1. Basic Prompt Structure

from anthropic import AnthropicBedrock
client = AnthropicBedrock(aws_region=AWS_REGION)
def get_completion(prompt, system=''):
    message = client.messages.create(
        model=MODEL_NAME,
        max_tokens=2000,
        temperature=0.0,
        messages=[
        {"role": "user", "content": prompt}
        ],
        system=system
    )
    return message.content[0].text


import boto3
from botocore.exceptions import ClientError
import json

bedrock = boto3.client('bedrock-runtime',region_name=AWS_REGION)

def get_completion(prompt, system_prompt=None):
    inference_config = {
        "temperature": 0.0,
        "maxTokens": 200
    }
    converse_api_params = {
        "modelId": modelId,
        "messages": [{"role": "user", "content": [{"text": prompt}]}],
        "inferenceConfig": inference_config
    }
    if system_prompt:
        converse_api_params["system"] = [{"text": system_prompt}]
    try:
        response = bedrock_client.converse(**converse_api_params)
        text_content = response['output']['message']['content'][0]['text']
        return text_content

    except ClientError as err:
        message = err.response['Error']['Message']
        print(f"A client error occured: {message}")



https://github.com/anthropics/anthropic-cookbook/blob/main/third_party/Wikipedia/wikipedia-search-cookbook.ipynb	


https://catalog.us-east-1.prod.workshops.aws/event/dashboard/en-US/workshop/lessons/lab-9-complex-prompts-from-scratch

https://workshops.aws/categories/Prompt%20Engineering

https://github.com/anthropics/prompt-eng-interactive-tutorial

https://docs.aws.amazon.com/bedrock/latest/userguide/model-ids.html

https://docs.google.com/spreadsheets/d/1BILlUtMltVr0HAevWhtUwFq5gUmI0R8gPeH0eKipNPI/edit?gid=1269630736#gid=1269630736

put words in claude's mouth
https://docs.google.com/spreadsheets/d/1BILlUtMltVr0HAevWhtUwFq5gUmI0R8gPeH0eKipNPI/edit?gid=1329603040#gid=1329603040

https://workspace.google.com/marketplace/app/claude_for_sheets/909417792257

https://www.databricks.com/blog/dspy-databricks

https://us-west-2.console.aws.amazon.com/console/home?region=us-west-2

8/28/2024
Spike Detected Errors

Most frequently socket hang up at connResetException
https://adp-cloud.splunkcloud.com/en-US/app/lifion/search?sid=1724775921.21138590_1293FF59-77FB-49B8-81D8-F45C9C3DABDC

ECONNRESET only a few times
https://adp-cloud.splunkcloud.com/en-US/app/lifion/search?sid=1724775957.21138682_1293FF59-77FB-49B8-81D8-F45C9C3DABDC

sometimes the response time spikes above 1 second
https://adp-cloud.splunkcloud.com/en-US/app/lifion/search?sid=1724776049.21138932_1293FF59-77FB-49B8-81D8-F45C9C3DABDC

if it is possible to do this safely, retries could be introduced. for example this connResetException was not retried and instantly resulted in a 500 for the request.
https://adp-cloud.splunkcloud.com/en-US/app/lifion/search?sid=1724776307.21139781_1293FF59-77FB-49B8-81D8-F45C9C3DABDC

401kadp.com
8/29/2024
Confluence Page – 
https://confluence.es.ad.adp.com/pages/viewpage.action?pageId=3039241338

Current analyses are based on data collected from AWS Athena table AWSDataCatalog.ml_event_pipeline_ingress_catalog_database.web_events_ms_query_v1 in the last 30 days. 


https://adpdev.splunkcloud.com/en-US/app/lifion/search?q=search%20index%3D%22lifion_appbuild*%22%20clientId%3D%22914413dd-9bb0-40fa-8aa6-7c4ebed0bd28%22%20containerId%3D%22ml-search-orchestrator*%22%20associateId%3D%224954da74-03b7-44ed-a983-83ff0ae94d7c%22%20traceId%3D%22c8ba7e05-8404-4cd5-acbd-40e5f986dfdc%22%20%22auth_cache%3A*%22%20containerId%3D%22ml-search-orchestrator-farm1-779fdf9cbf-r2hpk%22&display.page.search.mode=smart&dispatch.sample_ratio=1&earliest=1724936400&latest=1724940000&sid=1724944145.1954144
index="lifion_appbuild*" clientId="914413dd-9bb0-40fa-8aa6-7c4ebed0bd28" containerId="ml-search-orchestrator*" associateId="4954da74-03b7-44ed-a983-83ff0ae94d7c" traceId="c8ba7e05-8404-4cd5-acbd-40e5f986dfdc" "auth_cache:*" containerId="ml-search-orchestrator-farm1-779fdf9cbf-r2hpk"

UKEmployeeTwo/ P@ssword145

Week 6
9/3/2024
 

Intent detection

https://bitbucket.es.ad.adp.com/projects/LIFML/repos/ml-search-orchestrator/browse/python/IntentDetector.py?at=Release%2FLifion_24_40

9/4/2024
Splunk

https://adp-cloud.splunkcloud.com/en-US/app/lifion/search?sid=1725460515.23682198_5C021DD1-A790-4864-82AD-F2EC0BB5A2FD&dispatch.sample_ratio=1&display.events.fields=%5B%22%40timestamp%22%2C%22docker_labels.image.name%22%2C%22level%22%2C%22message%22%5D&display.events.type=table&display.page.search.mode=smart&display.prefs.events.count=50&q=search%20index%3D%22lifion_prep%22%20%22ml-search-orchestrator-farm1%22%20clientId%3D%229e7ceedf-303c-49d1-931e-e8501e438b18%22&earliest=-7d%40d&latest=now

index="lifion_prep" "ml-search-orchestrator-farm1" clientId="9e7ceedf-303c-49d1-931e-e8501e438b18"

https://bitbucket.es.ad.adp.com/projects/LIFHELM/repos/charts/browse/charts?at=refs%2Fheads%2Frelease%2Flifion_24_37

https://bitbucket.es.ad.adp.com/projects/LIFHELM/repos/charts/browse/charts/ml-search-orchestrator/prep-use1.values.yaml?at=refs%2Fheads%2Frelease%2Flifion_24_40

https://bitbucket.es.ad.adp.com/projects/LIFHELM/repos/charts/browse/charts/ml-search-orchestrator/prod-use1.values.yaml?at=refs%2Fheads%2Frelease%2Flifion_24_40

9/5/2024

 

9/6/2024

https://confluence.es.ad.adp.com/display/LIFML/ML+Search+Runbooks

Brian - Chat Overview
Ruchi - Search Overview
Pramodh - Smart Actions in detail
Brian - Direct answers in detail+RAR
Ruchi - Policy Q+A in detail+Vector storage + search
Pramodh - SORA integrations in detail
keyword recommender images


https://bitbucket.es.ad.adp.com/projects/LIFML/repos/ml-search-orchestrator/pull-requests?state=ALL&reviewer=&author=tirodkas

Repos 

ml-search-fusion
keyword-recommender
ml-search-commons
ml-search-orchestrator
ml-semantic-indexer
ml-search-indexer

ml-smart-actions
ml-agent-runtime-service
unified-search-ui-tests
ml-text-editor
multi-search-web-component
Week 7
9/9/2024
Follow-ups

•	Collect more reliable ranking scores: Ensure the data is accurate and consistent by considering user intents.
o	Ali - https://jira.service.tools-pi.com/browse/ML-3651
 multi-search-web-component startring collecting data 9/4/2024
•	Filter out redundant and outliers: Clean the dataset by removing duplicate or extreme values that could skew the ranking system.
o	Outliers based on density – different patterns
	https://adponline-my.sharepoint.com/:x:/r/personal/huanglin_es_ad_adp_com/_layouts/15/doc2.aspx?sourcedoc=%7B51D2E5EE-D1EA-493F-8ECA-BEC6549AFA27%7D&file=people_outlier.xlsx&action=default&mobileredirect=true&DefaultItemOpen=1

•	Explore word length and score distributions: Analyze the distribution of word length and scores to uncover patterns that my help detect user intention.
o	Mode = 17 -> ‘How many PTO days?’, ‘I am having a baby’ 

•	Create labels by identifying relevant data: Use the refined data to assign labels, focusing on top ranking items that best represent the search results.
o	If only keep highest scores, keep top 20% of search results.
o	The label explained 77% of data variance
o	The top feature is word length.

•	Evaluate relevance metrics: Measure the system by analyzing relevance metrics to ensure that the labeled data aligns with expected outcomes.

https://search.fusion.lifion.app.dit.us.caas.oneadp.com/api/ai/ml-models/
{
  "models": [
    {
      "model_id": "lucidworks-sentiment",
      "type": "mleap",
      "last_modified": "2023-01-26T23:07:28Z"
    },
    {
      "model_id": "opennlp",
      "type": "open-nlp",
      "last_modified": "2023-01-26T23:07:14Z"
    },
    {
      "model_id": "intent-detector",
      "type": "seldon",
      "last_modified": "2024-03-05T15:03:16Z"
    },
    {
      "model_id": "lifion-vector",
      "type": "seldon",
      "last_modified": "2024-08-20T20:28:42Z"
    },
    {
      "model_id": "openai",
      "type": "seldon",
      "last_modified": "2024-08-21T00:03:33Z"
    }
  ]
}

https://artifactory.us.caas.oneadp.com/ui/packages?name=fusion&type=packages
https://artifactory.us.caas.oneadp.com/artifactory/docker/


 
9/10/2024
Application Persistent Objects

https://huggingface.co/sentence-transformers?sort_models=likes#models
https://bitbucket.es.ad.adp.com/projects/LIFML/repos/ml-sentence-transformers-base-container/browse/init.py


"actions_cb18344e-3861-40cb-8cc0-33f71aaca6f2_query"

 



https://bitbucket.es.ad.adp.com/projects/LIFML/repos/ml-search-python-container/browse

curl --location --request POST 'http://search.milvus.lifion.app.dit.us.caas.oneadp.com/collections' \
--header 'accept: application/json' \
--header 'Content-Type: application/json' \
--data-raw '{
    "collection_name": "lifion_info_mgmt",
    "dimension": 3072,
    "index_file_size": 1024,
    "metric_type": "IP"
}

9/11/2024
# indexing 

curl --location 'https://search.fusion.wfnassociate.app.dit.us.caas.oneadp.com/api/apps/WFNAssociate/index/lifion_faq' \
--header 'Content-Type: application/json' \
--header 'x-api-key: ef4edda3-bebe-4a5b-8d92-ece92e308a88' \
--header 'Authorization: Basic YWRtaW46QURQYWRwMTE=' \
--data '{
    "id": "1234",
    "sr_sv_question_s": "I am a new hire just started this month. I am expecting my first child. The due day is 4-month later. In such a circumstance, do I still have the maternity leave benefits? If so, what it would be?",
    "sr_sv_answer_s": "For single the limit is $15,000 and the married the limit is $18,000",
    "userRole_s": "employee",
    "sr_mv_tags_ss": "UMIS_RETIREMENTSERVICES_1_1"
}'  


# Querying
curl --location 'https://search.fusion.wfnassociate.app.dit.us.caas.oneadp.com/api/apps/WFNAssociate/query/lifion_faq' \
--header 'Content-Type: application/x-www-form-urlencoded' \
--header 'x-api-key: bdfab13d-14e7-402f-8ce5-242fdd4e7549' \
--header 'Authorization: Basic YWRtaW46QURQYWRwMTE=' \
--data-urlencode 'q=I am a new hire just started this month. I am expecting my first child. The due day is 4-month later. In such a circumstance, do I still have the maternity leave benefits? If so, what it would be?' \
--data-urlencode 'locale=en_US' \
--data-urlencode 'fl=*' \
--data-urlencode 'debugScore=true'  



 
Implementation Details:

Ent Search has set up an env for us to try solr vector store
https://search.fusion.lifion.app.dev3.dit.us.caas.oneadp.com/auth/
Login using your creds
1. Create Actions Collections, copy managed-schema (something more might needed - pending), action profiles and pipeline for both indexing and querying.
2. Index Pipeline needs to be changed -> to account for solr vector db indexing
3. Query Pipeline needs to be changed -> for searching





![image](https://github.com/user-attachments/assets/014a8119-b27b-4265-aad8-a5e6e786901a)
